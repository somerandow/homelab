---
apiVersion: v1
kind: Service
metadata:
  name: plex-discovery
  labels:
    app.kubernetes.io/name: "plex"
    app.kubernetes.io/instance: "plex"
  annotations: {}
spec:
  type: LoadBalancer
  ports:
    - port: 5353
      targetPort: avahi
      protocol: UDP
      name: avahi
    - port: 32410
      targetPort: gdm1
      protocol: UDP
      name: gdm1
    - port: 32412
      targetPort: gdm2
      protocol: UDP
      name: gdm2
    - port: 32413
      targetPort: gdm3
      protocol: UDP
      name: gdm3
    - port: 32414
      targetPort: gdm4
      protocol: UDP
      name: gdm4
  selector:
    app.kubernetes.io/name: "plex"
    app.kubernetes.io/instance: "plex"
---
apiVersion: v1
kind: Service
metadata:
  name: plex-companion
  labels:
    app.kubernetes.io/name: "plex"
    app.kubernetes.io/instance: "plex"
  annotations: {}
spec:
  type: LoadBalancer
  ports:
    - port: 8324
      targetPort: companion
      protocol: UDP
      name: companion
  selector:
    app.kubernetes.io/name: "plex"
    app.kubernetes.io/instance: "plex"
---
apiVersion: v1
kind: Service
metadata:
  name: plex
  labels:
    app.kubernetes.io/name: "plex"
    app.kubernetes.io/instance: "plex"
  annotations: {}
spec:
  type: LoadBalancer
  ports:
    - port: 32400
      targetPort: http
      protocol: TCP
      name: http
  selector:
    app.kubernetes.io/name: "plex"
    app.kubernetes.io/instance: "plex"
